#!/bin/bash

VIP_PLUGIN_REPO="https://vip-svn.wordpress.com/plugins/"

# Automatically set up submodules
git submodule init && git submodule update

# Start the VM
vagrant up

# Add vip.dev entry to hosts file
echo "Configuring hosts file"
cat /etc/hosts | grep vip.dev || sudo echo "10.86.73.80 vip.dev" | sudo tee -a /etc/hosts

# Checkout the VIP shared plugins repo
if [ -d "www/wp-content/themes/vip" ]; then
	svn up www/wp-content/themes/vip/plugins
else
	mkdir -p www/wp-content/themes/vip
	svn co "$VIP_PLUGIN_REPO" www/wp-content/themes/vip/plugins
fi
